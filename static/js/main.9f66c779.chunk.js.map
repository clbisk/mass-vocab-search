{"version":3,"sources":["components/TracauShoutout/TracauShoutout.jsx","components/InputText/InputText.jsx","components/Definition/Definition.jsx","components/DefinedWord/DefinedWord.jsx","components/SearchedText/SearchedText.jsx","components/TextInput/TextInput.js","components/ImageDetections/ImageDetections.js","components/ImageInput/ImageInput.js","App.js","serviceWorker.js","index.js"],"names":["TracauShoutout","className","href","src","alt","React","Component","InputText","state","text","event","curText","shiftKey","key","this","props","submitSearch","onKeyPress","detectHotkeySubmit","value","onChange","setState","target","icon","faSearch","onClick","_","Definition","defnsList","startsWith","slice","map","defn","DefinedWord","popover","Popover","id","word","Title","as","Content","OverlayTrigger","placement","overlay","SearchedText","isLoaded","searchResults","words","split","compoundDefs","compoundPromises","i","searchCompoundWord","then","compoundDef","length","Promise","resolve","all","definitions","Object","assign","console","log","remainingSearchPromises","compoundPrev","compoundNext","tracauSearch","def","searchedText","trim","replace","axios","get","tracau_API_key","result","data","tratu","tracauData","fields","fulltext","engDefStart","indexOf","defnTab","engDefEnd","defnsStartTag","defnsStart","defns","defnsEnd","entryList","forEach","parsedDef","seeOtherEnd","push","search","footer","returnToSearch","compoundWord","TextInput","searched","toggleSearch","bind","ImageDetections","detection","definition","tr","translations","blocks","fullText","pages","firstWord","paragraphs","secondWord","firstWordBox","boundingBox","vertices","secondWordBox","firstYTop","Math","min","y","firstXLeft","x","firstYBottom","max","firstXRight","secondYTop","secondXLeft","secondYBottom","firstHeight","rotation","detectImageRotation","detections","p0","boundingPoly","p1","p2","p3","yTop","xLeft","yBottom","xRight","topProp","leftProp","heightProp","widthProp","imageWidth","description","renderDefinition","style","top","left","height","width","renderDetectionsOnImage","URL","createObjectURL","images","imageHeight","ImageInput","img_files","img_buffers","imagesInput","textDetections","definedDetections","detectionsLoaded","changeImage","setImageProps","pictureFiles","pictureDataURLs","img_type","parseFiles","promises","img_file","parseFile","strings","getOCR","reader","FileReader","addEventListener","image","Image","onload","readAsDataURL","post","img","textAnnotations","fullTextAnnotation","getDefinitions","defnPromises","toLowerCase","YANDEX_API_KEY","results","searchAgainPromises","undefined","DEEPL_API_KEY","filter","val","imgExtension","App","path","component","exact","Boolean","window","location","hostname","match","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","registration","unregister","catch","error","message"],"mappings":"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","file":"static/js/main.9f66c779.chunk.js","sourcesContent":["import React from 'react';\r\nimport './TracauShoutout.scss';\r\n\r\nclass TracauShoutout extends React.Component {\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className=\"tracau-banner\">\r\n\t\t\t\t<a href=\"https://tracau.vn\">\r\n\t\t\t\t\t<img src=\"https://tracau.vn/assets/img/api/banner_white.png\" alt=\"Powered by tra câu\"/>\r\n\t\t\t\t</a>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default TracauShoutout;","import React from 'react';\r\nimport TracauShoutout from '../TracauShoutout/TracauShoutout';\r\nimport './InputText.scss';\r\nimport '../../App.scss';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faSearch } from '@fortawesome/free-solid-svg-icons';\r\n\r\nclass InputText extends React.Component {\r\n    constructor() {\r\n        super()\r\n        this.state = {text: \"\"};\r\n    }\r\n\r\n    detectHotkeySubmit(event, curText) {\r\n        if (event.shiftKey && event.key === \"Enter\") {\r\n            this.props.submitSearch(curText);\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"InputText\">\r\n                <div className=\"main-content\">\r\n                    <div>Enter text: </div>\r\n                    <div className=\"upper-flex\" onKeyPress = { event => this.detectHotkeySubmit(event, this.state.text) }>\r\n                        <textarea className=\"big-textbox\"\r\n                            value = {this.state.text}\r\n                            onChange = { event => this.setState({ text: event.target.value }) }></textarea>\r\n                        <FontAwesomeIcon icon={faSearch} onClick={_ => this.props.submitSearch(this.state.text)} />\r\n                    </div>\r\n                </div>\r\n\r\n                <TracauShoutout></TracauShoutout>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default InputText;","import React from 'react';\r\nimport '../../App.scss';\r\n\r\nclass Definition extends React.Component {\r\n    render() {\r\n        if (this.props.defnsList[0].startsWith(\"See \")) {\r\n            this.defnsList = this.props.defnsList.slice(1);\r\n        } else this.defnsList = this.props.defnsList;\r\n\r\n        return (\r\n            <div className=\"Definition\">\r\n                <ol>\r\n                    {this.defnsList.map((defn) => <li>{defn}</li>)}\r\n                </ol>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Definition;","import React from 'react';\r\nimport OverlayTrigger from 'react-bootstrap/OverlayTrigger';\r\nimport Popover from 'react-bootstrap/Popover';\r\nimport '../../App.scss';\r\nimport Definition from '../Definition/Definition';\r\n\r\nclass DefinedWord extends React.Component {\r\n    render() {\r\n        const popover = (\r\n            <Popover id={this.props.word}>\r\n                <Popover.Title as=\"h3\">{this.props.word}</Popover.Title>\r\n                <Popover.Content>\r\n                    <Definition defnsList={this.props.defn} />\r\n                </Popover.Content>\r\n            </Popover>\r\n        );\r\n\r\n        return (\r\n            <div className=\"DefinedWord\">\r\n                <OverlayTrigger\r\n                    key={this.props.word}\r\n                    placement='top'\r\n                    overlay={popover}\r\n                >\r\n                    <div>{this.props.word}</div>\r\n                </OverlayTrigger>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default DefinedWord;","import React from 'react';\r\nimport TracauShoutout from '../TracauShoutout/TracauShoutout';\r\nimport DefinedWord from '../DefinedWord/DefinedWord';\r\nimport '../../App.scss';\r\nimport './SearchedText.scss';\r\nimport axios from 'axios';\r\n\r\nclass SearchedText extends React.Component {\r\n    constructor() {\r\n        super();\r\n        this.state = { isLoaded: false, searchResults: {} };\r\n    }\r\n\r\n    search(text) {\r\n        const words = text.split(/[ X\\n]/);\r\n        // console.log(\"searching for words\", words);\r\n\r\n        var compoundDefs = {};\r\n\r\n        const compoundPromises = words.map((word, i) => {\r\n            // check for compound words first\r\n            return this.searchCompoundWord(words, i).then((compoundDef) => {\r\n                if (compoundDef && compoundDef.length > 0) {\r\n                    if (!compoundDef[0].startsWith(\"See \")) {\r\n                        compoundDefs[word + \" \" + words[i + 1]] = compoundDef;\r\n                        return Promise.resolve();\r\n                    }\r\n                }\r\n            });\r\n        });\r\n\r\n        return Promise.all(compoundPromises).then(() => {\r\n            var definitions = Object.assign({}, compoundDefs);  // shallow copy\r\n            console.log(\"compound definitions:\", definitions);\r\n\r\n            const remainingSearchPromises = words.map((word, i) => {\r\n                const compoundPrev = words[i - 1] + \" \" + word;\r\n                const compoundNext = word + \" \" + words[i + 1];\r\n                if (!(compoundPrev in compoundDefs) && !(compoundNext in compoundDefs)) {\r\n                    // not part of a compound word\r\n                    return this.tracauSearch(word).then(def => {\r\n                        if (def && def.length > 0) {\r\n                            definitions[word] = def;\r\n                        }\r\n                        // if it could not be defined, we will simply gray out the word\r\n                        return Promise.resolve();\r\n                    });\r\n                } else return Promise.resolve();\r\n            });\r\n\r\n            return Promise.all(remainingSearchPromises).then(definitions);\r\n        });\r\n    }\r\n\r\n    searchCompoundWord(words, i) {\r\n        if (words.length > i + 1) {\r\n            return this.tracauSearch(words[i] + \" \" + words[i + 1]);\r\n        } else {\r\n            return Promise.resolve();\r\n        }\r\n    }\r\n\r\n    tracauSearch(searchedText) {\r\n        // strip special characters first\r\n        const punctuation = /[.,/#!$%^&*;:{}=\\-_`~()]/g;\r\n        const text = searchedText.trim().replace(punctuation, \"\");\r\n\r\n        return axios.get(\"https://api.tracau.vn/\" + tracau_API_key + \"/s/\" + text + \"/vi\").then(result => {\r\n            // console.log(`result for ${searchedText}:`, result);\r\n\r\n            if (result.data.tratu.length <= 0)\r\n                return false;\r\n\r\n            const tracauData = result.data.tratu[0].fields.fulltext;\r\n\r\n            const engDefStart = tracauData.indexOf('<article id=\"dict_vv\" data-tab-name=\"Việt - Anh\"');\r\n            var defnTab = tracauData.slice(engDefStart);\r\n            const engDefEnd = defnTab.indexOf('</article>');\r\n            defnTab = defnTab.slice(0, engDefEnd);\r\n\r\n            const defnsStartTag = '<table id=\"definition_T_ve_id\" border=\"0\">';\r\n            const defnsStart = defnTab.indexOf(defnsStartTag) + defnsStartTag.length;\r\n            var defns = defnTab.slice(defnsStart);\r\n            const defnsEnd = defns.indexOf('</table>');\r\n            defns = defns.slice(0, defnsEnd);\r\n\r\n            const aDefStartTag = '<td id=\"I_C\"><font color=\"#999\">■</font></td><td id=\"C_C\" colspan=\"2\">';\r\n            const entryList = defns.split(aDefStartTag);\r\n\r\n            var defnsList = [];\r\n            entryList.slice(1).forEach(def => {\r\n                var parsedDef = def.slice(0, def.indexOf('</td>'));\r\n\r\n                // check if tracau is trying to redirect user to a similar word\r\n                const seeOtherTag = 'Xem <font color=\"#1371BB\">';\r\n                const seeOtherTagLower = 'xem <font color=\"#1371BB\">';\r\n                const seeOtherEnd = parsedDef.indexOf('</font>')\r\n                if (parsedDef.startsWith(seeOtherTag) || parsedDef.startsWith(seeOtherTagLower)) {\r\n                    parsedDef = \"See \" + parsedDef.slice(seeOtherTag.length, seeOtherEnd);\r\n                }\r\n\r\n                defnsList.push(parsedDef);\r\n            });\r\n\r\n            return defnsList;\r\n        });\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.search(this.props.text).then((result) => {\r\n            console.log(\"search results\", result);\r\n            this.setState({ isLoaded: true, searchResults: result });\r\n        })\r\n    }\r\n\r\n    render() {\r\n        const footer = (\r\n            <div className=\"footer\">\r\n                <div className=\"submit-search\">\r\n                    <button onClick={this.props.returnToSearch}>Search again</button>\r\n                </div>\r\n                <TracauShoutout></TracauShoutout>\r\n            </div>\r\n        );\r\n\r\n        return this.props.text === \"\" ? (\r\n            <div className=\"SearchedText\">\r\n                <div className=\"text-display\">\r\n                    <div className=\"vertical-centered\">\r\n                        <div>Oops! Looks like no text was input. Would you like to search again?</div>\r\n                    </div>\r\n                </div>\r\n\r\n                {footer}\r\n            </div>\r\n        ) : this.state.isLoaded ? (\r\n            <div className=\"SearchedText\">\r\n                <div className=\"text-display\">\r\n                    <div className=\"vertical-centered\">\r\n                        <div className=\"words-and-definitions\">\r\n                            {\r\n                                this.props.text.split(/[ X\\n]/).map((word, i) => {\r\n                                    var lastWordDefined = -1;\r\n                                    // if this word was not part of a previous compound word...\r\n                                    if (lastWordDefined === i)\r\n                                        return;\r\n\r\n                                    // check for compound words first\r\n                                    const compoundWord = word + \" \" + this.props.text.split(/[ X\\n]/)[i + 1];\r\n                                    if (compoundWord in this.state.searchResults) {\r\n                                        const defn = this.state.searchResults[compoundWord];\r\n                                        return <DefinedWord word={compoundWord} defn={defn} key={i} />\r\n                                    }\r\n\r\n                                    // make sure a defition was found\r\n                                    if (word in this.state.searchResults) {\r\n                                        const defn = this.state.searchResults[word];\r\n                                        return <DefinedWord word={word} defn={defn} key={i} />\r\n                                    }\r\n\r\n                                    return (<div className=\"definition-not-found\" key={i}>{word}</div>)\r\n                                })\r\n                            }\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                {footer}\r\n            </div>\r\n        ) : (\r\n            <div className=\"SearchedText\">\r\n                <div className=\"text-display\">\r\n                    <div className=\"vertical-centered\">loading...</div>\r\n                </div>\r\n\r\n                {footer}\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nconst tracau_API_key = \"WBBcwnwQpV89\";\r\n\r\nexport default SearchedText;\r\n","\r\nimport React from 'react';\r\nimport InputText from '../InputText/InputText';\r\nimport SearchedText from '../SearchedText/SearchedText';\r\n\r\nclass TextInput extends React.Component {\r\n    constructor() {\r\n\t\tsuper();\r\n\t\tthis.state = { searched: false, searchedText: \"\" };\r\n\t\tthis.toggleSearch = this.toggleSearch.bind(this);\r\n\t}\r\n\r\n\ttoggleSearch(text) {\r\n\t\tthis.setState(state => ({\r\n\t\t\tsearched: !state.searched,\r\n\t\t\tsearchedText: text\r\n\t\t}));\r\n\t}\r\n    \r\n    render() {\r\n        return this.state.searched ? (\r\n            <div className=\"TextInput\">\r\n                <SearchedText text={this.state.searchedText}\r\n                    returnToSearch={_ => this.toggleSearch(\"\")}>\r\n                </SearchedText>\r\n            </div>\r\n        ) : (\r\n            <div className=\"TextInput\">\r\n                <header className=\"App-header\">\r\n                    <InputText submitSearch={this.toggleSearch}></InputText>\r\n                </header>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default TextInput;","import React from 'react';\r\nimport OverlayTrigger from 'react-bootstrap/OverlayTrigger';\r\nimport Popover from 'react-bootstrap/Popover';\r\nimport './ImageDetections.scss';\r\n\r\nclass ImageDetections extends React.Component {\r\n    constructor() {\r\n        super();\r\n    }\r\n\r\n    renderDefinition(detection) {\r\n        if (detection.definition.def && detection.definition.def.length > 0) {\r\n            const defnsList = detection.definition.def[0].tr.map(tr => {\r\n                return (<li>{tr.text}</li>);\r\n            });\r\n            return (<ol>{defnsList}</ol>);\r\n        } else if (detection.definition.translations.length > 0) {\r\n            const defnsList = detection.definition.translations.map(tr => {\r\n                return (<li>{tr.text}</li>);\r\n            });\r\n            return (<ol>{defnsList}</ol>);\r\n        } else return (\"no definition found :(\");\r\n    }\r\n\r\n    detectImageRotation() {\r\n        // pages -> blocks -> paragraphs -> words\r\n        const blocks = this.props.fullText.pages[0].blocks;\r\n        const firstWord = blocks[0].paragraphs[0].words[0];\r\n        const secondWord = blocks[0].paragraphs[0].words[1] ? blocks[0].paragraphs[0].words[1] : (blocks[0].paragraphs[1].words[0] ? blocks[0].paragraphs[1].words[0] : blocks[1].paragraphs[0].words[0]);\r\n        const firstWordBox = firstWord.boundingBox.vertices;\r\n        const secondWordBox = secondWord.boundingBox.vertices;\r\n\r\n        const firstYTop = Math.min(firstWordBox[0].y, firstWordBox[1].y, firstWordBox[2].y, firstWordBox[3].y);\r\n        const firstXLeft = Math.min(firstWordBox[0].x, firstWordBox[1].x, firstWordBox[2].x, firstWordBox[3].x);\r\n        const firstYBottom = Math.max(firstWordBox[0].y, firstWordBox[1].y, firstWordBox[2].y, firstWordBox[3].y);\r\n        const firstXRight = Math.max(firstWordBox[0].x, firstWordBox[1].x, firstWordBox[2].x, firstWordBox[3].x);\r\n        const secondYTop = Math.min(secondWordBox[0].y, secondWordBox[1].y, secondWordBox[2].y, secondWordBox[3].y);\r\n        const secondXLeft = Math.min(secondWordBox[0].x, secondWordBox[1].x, secondWordBox[2].x, secondWordBox[3].x);\r\n        const secondYBottom = Math.max(secondWordBox[0].y, secondWordBox[1].y, secondWordBox[2].y, secondWordBox[3].y);\r\n        const secondXRight = Math.max(secondWordBox[0].x, secondWordBox[1].x, secondWordBox[2].x, secondWordBox[3].x);\r\n        const firstWidth = firstXRight - firstXLeft;\r\n        const firstHeight = firstYBottom - firstYTop;\r\n\r\n        if (secondXLeft > (firstXLeft + firstWidth)) {\r\n            return \"right side up\";\r\n        } else {\r\n            console.log(\"the image was flipped at some point during detection and I simply don't know why :/\");\r\n            \r\n            if (secondYTop > (firstYTop + firstHeight)) {\r\n                return \"rotated left, flipped\";\r\n            } else if (secondYBottom < firstYBottom - (firstHeight)) {\r\n                return \"rotated left\";\r\n            }\r\n        }\r\n    }\r\n\r\n    renderDetectionsOnImage() {\r\n        const rotation = this.detectImageRotation();\r\n\r\n        const detections = this.props.detections.map((detection, i) => {\r\n            const p0 = detection.boundingPoly.vertices[0];\r\n            const p1 = detection.boundingPoly.vertices[1];\r\n            const p2 = detection.boundingPoly.vertices[3];\r\n            const p3 = detection.boundingPoly.vertices[2];\r\n\r\n            const yTop = Math.min(p0.y, p1.y, p2.y, p3.y);\r\n            const xLeft = Math.min(p0.x, p1.x, p2.x, p3.x);\r\n            const yBottom = Math.max(p0.y, p1.y, p2.y, p3.y);\r\n            const xRight = Math.max(p0.x, p1.x, p2.x, p3.x);\r\n\r\n            const height = yBottom - yTop;\r\n            const width = xRight - xLeft;\r\n\r\n            var topProp = yTop;\r\n            var leftProp = xLeft;\r\n            var heightProp = height;\r\n            var widthProp = width;\r\n\r\n            if (rotation !== \"right side up\") {\r\n                if (rotation === \"rotated left\") {\r\n                    topProp = xLeft;\r\n                    leftProp = this.props.imageWidth - yBottom;\r\n                    heightProp = xRight - xLeft;\r\n                    widthProp = yBottom - yTop;\r\n                }\r\n            }\r\n\r\n            const popover = (\r\n                <Popover className=\"dynamic-text-size\" id={detection.description} key={detection.description + yTop + \"-popover\"}>\r\n                    <Popover.Title className=\"large-dynamic-text-size\">{detection.description}</Popover.Title>\r\n                    <Popover.Content>\r\n                        {this.renderDefinition(detection)}\r\n                    </Popover.Content>\r\n                </Popover>\r\n            );\r\n\r\n            return (\r\n                <div key={detection.description + yTop}>\r\n                    <OverlayTrigger\r\n                        key={detection.description}\r\n                        placement='top'\r\n                        overlay={popover}\r\n                    >\r\n                        <div className=\"text-overlay\" style={{ top: topProp, left: leftProp, height: heightProp, width: widthProp }}>{detection.description}</div>\r\n                    </OverlayTrigger>\r\n                </div>\r\n            );\r\n        });\r\n\r\n        return detections;\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"ImageDetections\">\r\n                <div className=\"img-box\">\r\n                    {this.renderDetectionsOnImage()}\r\n                    <img src={URL.createObjectURL(this.props.images[0])} width={this.props.imageWidth} height={this.props.imageHeight} />\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default ImageDetections;","import axios from 'axios';\r\nimport React from 'react';\r\nimport ImageUploader from 'react-images-upload';\r\nimport ImageDetections from '../ImageDetections/ImageDetections';\r\nimport './ImageInput.scss';\r\nimport YANDEX_API_KEY from '../../yandex_key.json';\r\nimport DEEPL_API_KEY from '../../deepL_api_key.json';\r\n\r\nclass ImageInput extends React.Component {\r\n    constructor() {\r\n        super();\r\n        this.state = { img_files: null, img_buffers: null, imagesInput: false, textDetections: null, definedDetections: null, detectionsLoaded: false, imageWidth: 0, imageHeight: 0 };\r\n        this.changeImage = this.changeImage.bind(this);\r\n        this.setImageProps = this.setImageProps.bind(this);\r\n    }\r\n\r\n    changeImage(pictureFiles, pictureDataURLs) {\r\n        this.setState({ img_files: pictureFiles, img_type: '.jpg', imagesInput: true }, this.parseFiles);\r\n    }\r\n\r\n    async parseFiles() {\r\n        const promises = this.state.img_files.map(img_file => {\r\n            return this.parseFile(img_file);\r\n        });\r\n\r\n        Promise.all(promises).then(strings => {\r\n            this.setState({ img_buffers: strings }, this.getOCR);\r\n        });\r\n    }\r\n\r\n    setImageProps(width, height) {\r\n        this.setState({ imageWidth: width, imageHeight: height });\r\n    }\r\n\r\n    async parseFile(img_file) {\r\n        const setImageProps = this.setImageProps;\r\n\r\n        return new Promise(function (resolve) {\r\n            const reader = new FileReader();\r\n            reader.addEventListener(\"load\", event => {\r\n                var image = new Image();\r\n                image.src = event.target.result;\r\n\r\n                image.onload = function() {\r\n                    setImageProps(this.width, this.height);\r\n                }\r\n\r\n                resolve(reader.result);\r\n            }, false);\r\n            reader.readAsDataURL(img_file);\r\n        });\r\n    }\r\n\r\n    async getOCR() {\r\n        return axios.post(`https://us-east4-true-bit-315318.cloudfunctions.net/documentTextDetection`, { img: this.state.img_buffers[0] }).then(result => {\r\n            this.setState({ textDetections: result.data.textAnnotations, fullText: result.data.fullTextAnnotation }, this.getDefinitions);\r\n        });\r\n    }\r\n\r\n    async getDefinitions() {\r\n        const defnPromises = this.state.textDetections.map((detection, i) => {\r\n            if (i === 0) return;    //skip the complete text one\r\n\r\n            const punctuation = /[.,/#!$%^&*;:{}=\\-_`~()]/g;\r\n            const text = detection.description.replace(punctuation, \"\").toLowerCase();\r\n            if (text.length === 0) return;\r\n\r\n            return axios.get(`https://dictionary.yandex.net/api/v1/dicservice.json/lookup?key=${YANDEX_API_KEY.key}&lang=ru-en&text=${text}`).then(result => {\r\n                Object.assign(detection, { definition: result.data });\r\n                return detection;\r\n            });\r\n        });\r\n\r\n        Promise.all(defnPromises).then(results => {\r\n            const searchAgainPromises = results.map(detection => {\r\n                if (detection === undefined) return;\r\n\r\n                if (detection.def === undefined || detection.def.length === 0) {\r\n                    const punctuation = /[.,/#!$%^&*;:{}=\\-_`~()]/g;\r\n                    const text = detection.description.replace(punctuation, \"\").toLowerCase();\r\n\r\n                    return axios.get(`https://api-free.deepl.com/v2/translate?auth_key=${DEEPL_API_KEY.key}&text=${text}&target_lang=EN`).then(defn => {\r\n                        Object.assign(detection, { definition: defn.data });\r\n                        return detection;\r\n                    });\r\n                } else { return detection }\r\n            })\r\n\r\n            Promise.all(searchAgainPromises).then(results => {\r\n                this.setState({ definedDetections: results.filter(val => val !== undefined), detectionsLoaded: true });\r\n            });\r\n        })\r\n    }\r\n\r\n    render() {\r\n        return this.state.detectionsLoaded ? (\r\n            <div className=\"ImageInput\"><ImageDetections detections={this.state.definedDetections} images={this.state.img_files} imageWidth={this.state.imageWidth} imageHeight={this.state.imageHeight} fullText={this.state.fullText} /></div>\r\n        ) : this.state.imagesInput ? (\r\n            <div className=\"ImageInput\">Loading image text...</div>\r\n        ) : (\r\n            <div className=\"ImageInput\">\r\n                <ImageUploader onChange={this.changeImage} imgExtension={['.jpg', '.png', '.pdf', '.tif', '.gif', '.bmp']} />\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default ImageInput;","import React from 'react';\r\nimport TextInput from './components/TextInput/TextInput';\r\nimport ImageInput from './components/ImageInput/ImageInput';\r\nimport { BrowserRouter as Router, Route, Switch } from 'react-router-dom';\r\nimport './App.scss';\r\n\r\nclass App extends React.Component {\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className=\"App\">\r\n\t\t\t\t<Router>\r\n\t\t\t\t\t<Switch>\r\n\t\t\t\t\t\t<Route path=\"/text\" component={TextInput} />\r\n\t\t\t\t\t\t<Route path=\"/img\" component={ImageInput} />\r\n\t\t\t\t\t\t<Route exact path=\"/\" component={TextInput} />\r\n\t\t\t\t\t</Switch>\r\n\t\t\t\t</Router>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' },\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready\r\n      .then(registration => {\r\n        registration.unregister();\r\n      })\r\n      .catch(error => {\r\n        console.error(error.message);\r\n      });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport './App.scss';\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}